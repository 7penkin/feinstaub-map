webpackJsonp([0,2],[,,function(t,e){"use strict";t.exports={center:[48.8,9.2],zoom:11}},,,function(t,e){},,function(t,e,n){n(21);var o=n(0)(n(11),n(30),null,null);t.exports=o.exports},,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=o(i);e["default"]={data:function(){return{}},props:{cell:Array},computed:{mean:function(){return{P1:a["default"].meanBy(this.cell,function(t){return t.o.data.P1}),P2:a["default"].meanBy(this.cell,function(t){return t.o.data.P2})}}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={components:{},data:function(){return{}},computed:{},created:function(){},mounted:function(){this.$nextTick(function(){})},methods:{}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(26),a=o(i),r=n(24),s=o(r),l=n(25),u=o(l);e["default"]={components:{GeoMap:a["default"],CellInfo:s["default"],MapLegend:u["default"]},data:function(){return{selectedCell:null}}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),a=o(i);n(17);var r=n(2),s=o(r),l=n(13),u=o(l);n(14),e["default"]={mounted:function(){var t=this;this.$nextTick(function(){var e=a["default"].map(t.$el,{center:s["default"].center,zoom:s["default"].zoom});a["default"].tileLayer("https://{s}.tiles.madavi.de/{z}/{x}/{y}.png",{attribution:'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:14}).addTo(e);var n={mouseover:function(e){t.$emit("cell-selected",e)},mouseout:function(){},click:function(e){t.$emit("cell-selected",e)}},o=new a["default"].HexbinLayer(n).addTo(e);u["default"].getAllSensors().then(function(t){o.data(t)})})}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=o(i);n(32);var r="https://api.luftdaten.info/static/v1/data.json",s={fetchNow:function(){return fetch(r).then(function(t){return t.json()})},getAllSensors:function(){return s.fetchNow().then(function(t){var e=a["default"].chain(t).filter(function(t){return null!=t.location.latitude&&null!=t.location.longitude&&("PMS3003"==t.sensor.sensor_type.name&&t.sensordatavalues.length>=2||"SDS011"===t.sensor.sensor_type.name&&t.sensordatavalues.length>=2)}).groupBy(function(t){return t.sensor.id}).map(function(t,e){var n=Number(t[0].location.latitude),o=Number(t[0].location.longitude),i=a["default"].reduce(t,function(t,e){var n=a["default"].keyBy(e.sensordatavalues,"value_type");return t.P1+=Number(n.P1.value),t.P2+=Number(n.P2.value),t},{P1:0,P2:0});return{latitude:n+5e-4,longitude:o+5e-4,id:t[0].sensor.id,data:{P1:i.P1/t.length,P2:i.P2/t.length}}}).value();return Promise.resolve(e)})}};e["default"]=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i=n(3),a=o(i),r=n(16),s=o(r),l=n(15),u=o(l),c=n(1),d=o(c);s["default"].hexbin=u["default"].hexbin,a["default"].HexbinLayer=a["default"].Layer.extend({_undef:function(t){return"undefined"==typeof t},options:{radius:25,opacity:.6,duration:200,valueDomain:[20,40,60,100,500],colorRange:["#00796B","#F9A825","#E65100","#DD2C00","#960084"],onmouseover:void 0,onmouseout:void 0,click:void 0,lng:function(t){return t.longitude},lat:function(t){return t.latitude},value:function(t){return d["default"].meanBy(t,function(t){return t.o.data.P1})}},initialize:function(t){a["default"].setOptions(this,t),this._data=[],this._colorScale=s["default"].scale.linear().domain(this.options.valueDomain).range(this.options.colorRange).clamp(!0)},onAdd:function(t){this.map=t;var e=this;this._svg=a["default"].svg(),t.addLayer(this._svg),this._rootGroup=s["default"].select(this._svg._rootGroup).classed("d3-overlay",!0),this.selection=this._rootGroup,this._pixelOrigin=t.getPixelOrigin(),this._wgsOrigin=a["default"].latLng([0,0]),this._wgsInitialShift=this.map.latLngToLayerPoint(this._wgsOrigin),this._zoom=this.map.getZoom(),this._shift=a["default"].point(0,0),this._scale=1,this.projection={latLngToLayerPoint:function(t,n){n=e._undef(n)?e._zoom:n;var o=e.map.project(a["default"].latLng(t),n)._round();return o._subtract(e._pixelOrigin)},layerPointToLatLng:function(t,n){n=e._undef(n)?e._zoom:n;var o=a["default"].point(t).add(e._pixelOrigin);return e.map.unproject(o,n)},unitsPerMeter:256*Math.pow(2,e._zoom)/40075017,map:e.map,layer:e,scale:1},this.projection._projectPoint=function(t,n){var o=e.projection.latLngToLayerPoint(new a["default"].LatLng(n,t));this.stream.point(o.x,o.y)},this.projection.pathFromGeojson=s["default"].geo.path().projection(s["default"].geo.transform({point:this.projection._projectPoint})),this.projection.latLngToLayerFloatPoint=this.projection.latLngToLayerPoint,this.projection.getZoom=this.map.getZoom.bind(this.map),this.projection.getBounds=this.map.getBounds.bind(this.map),this.selection=this._rootGroup,this.draw()},onRemove:function(t){null!=this._container&&this._container.remove(),t.off({moveend:this._redraw},this),this._container=null,this._map=null},addTo:function(t){return t.addLayer(this),this},_disableLeafletRounding:function(){this._leaflet_round=a["default"].Point.prototype._round,a["default"].Point.prototype._round=function(){return this}},_enableLeafletRounding:function(){a["default"].Point.prototype._round=this._leaflet_round},draw:function(){this._disableLeafletRounding(),this._redraw(this.selection,this.projection,this.map.getZoom()),this._enableLeafletRounding()},getEvents:function(){return{zoomend:this._zoomChange}},_zoomChange:function(t){this._disableLeafletRounding();var e=this._undef(t.zoom)?this.map._zoom:t.zoom;this._zoomDiff=e-this._zoom,this._scale=Math.pow(2,this._zoomDiff),this.projection.scale=this._scale,this._shift=this.map.latLngToLayerPoint(this._wgsOrigin)._subtract(this._wgsInitialShift.multiplyBy(this._scale));var n=["translate(",this._shift.x,",",this._shift.y,") "],o=["scale(",this._scale,",",this._scale,") "];this._rootGroup.attr("transform",n.concat(o).join("")),this.draw(),this._enableLeafletRounding()},_redraw:function(t,e,n){var o=this,i=this._data.map(function(t){var n=o.options.lng(t),i=o.options.lat(t),a=e.latLngToLayerPoint([i,n]);return{o:t,point:a}}),a=t.selectAll("g.hexbin").data([n],function(t){return t});a.enter().append("g").attr("class",function(t){return"hexbin zoom-"+t}),a.exit().remove(),this._createHexagons(a,i,e)},_createHexagons:function(t,e,n){var o=this,i=s["default"].hexbin().radius(this.options.radius/n.scale).x(function(t){return t.point.x}).y(function(t){return t.point.y}),a=i(e),r=t.selectAll("path.hexbin-hexagon").data(a);r.transition().duration(this.options.duration).attr("fill",function(t){return o._colorScale(o.options.value(t))}).attr("fill-opacity",this.options.opacity).attr("stroke-opacity",this.options.opacity),r.enter().append("path").attr("class","hexbin-hexagon").attr("d",function(t){return"M"+t.x+","+t.y+i.hexagon()}).attr("fill",function(t){return o._colorScale(o.options.value(t))}).attr("fill-opacity",.01).attr("stroke-opacity",.01).on("mouseover",this.options.mouseover).on("mouseout",this.options.mouseout).on("click",this.options.click).transition().duration(this.options.duration).attr("fill-opacity",this.options.opacity).attr("stroke-opacity",this.options.opacity),r.exit().transition().duration(this.options.duration).attr("fill-opacity",.01).attr("stroke-opacity",.01).remove()},data:function(t){return this._data=null!=t?t:[],this.draw(),this}})},,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,function(t,e,n){n(20);var o=n(0)(n(9),n(29),null,null);t.exports=o.exports},function(t,e,n){n(18);var o=n(0)(n(10),n(27),null,null);t.exports=o.exports},function(t,e,n){n(19);var o=n(0)(n(12),n(28),null,null);t.exports=o.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"legend"}},[n("div",{attrs:{id:"legend-inner"}},[n("div",{staticClass:"gradient"},[n("div",{staticClass:"limit"})]),n("div",{staticClass:"labels"},[n("div",{staticClass:"label",staticStyle:{bottom:"100%"}},[t._v("500")]),n("div",{staticClass:"label",staticStyle:{bottom:"80%"}},[t._v("100")]),n("div",{staticClass:"label",staticStyle:{bottom:"60%"}},[t._v("75")]),n("div",{staticClass:"label limit",staticStyle:{bottom:"40%"}},[t._v("50")]),n("div",{staticClass:"label",staticStyle:{bottom:"20%"}},[t._v("25")]),n("div",{staticClass:"label",staticStyle:{bottom:"0%"}},[t._v("0 µg/m³")])])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map"})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.cell?n("div",{attrs:{id:"cell-info"}},[n("h3",[t._v("#Sensors "+t._s(t.cell.length))]),n("table",[t._m(0),n("tr",{staticClass:"mean"},[n("td",[t._v("mean")]),n("td",[t._v(t._s(t.mean.P1.toFixed(0)))]),n("td",[t._v(t._s(t.mean.P2.toFixed(0)))])]),t._l(t.cell,function(e){return n("tr",[n("td",[t._v(t._s(e.o.id))]),n("td",[t._v(t._s(e.o.data.P1.toFixed(0)))]),n("td",[t._v(t._s(e.o.data.P2.toFixed(0)))])])})],2)]):t._e()},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("µg/m³")]),n("th",[t._v("PM10")]),n("th",[t._v("PM2.5")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"content"}},[n("geo-map",{on:{"cell-selected":function(e){return t.selectedCell=e}}}),n("map-legend"),n("cell-info",{attrs:{cell:t.selectedCell}})],1)},staticRenderFns:[]}},,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i=n(8),a=o(i),r=n(6),s=o(r),l=n(7),u=o(l);n(5);var c=n(2),d=o(c),f=s["default"].parse(window.location.search.substring(1));if(console.log(f),f.center){var h=f.center.split(",").map(function(t){return parseFloat(t)});d["default"].center=h}else{var p={deutschland:[51.165,10.455277777778],stuttgart:[48.8,9.2],aachen:[50.776666666667,6.0836111111111],augsburg:[48.3585423,10.8943915],berlin:[52.516666666,13.383333333],bielefeld:[52.016666666,8.516666666],bochum:[51.4825,7.2169444444444],boeblingen:[48.6851035,9.0090113],bonn:[50.733991666667,7.0998138888889],braunschweig:[52.269166666667,10.521111111111],bremen:[53.076944444,8.808888888],chemnitz:[50.832222222222,12.924166666667],darmstadt:[49.866666666667,8.65],dortmund:[51.514166666667,7.4638888888889],dresden:[51.0517214,13.7310367],duesseldorf:[51.225555555556,6.7827777777778],duisburg:[51.435147222222,6.7626916666667],erfurt:[50.978055555556,11.029166666667],essen:[51.458069444444,7.0147611111111],frankfurt:[50.110555555556,8.6822222222222],freiburg:[47.99,7.82],fuerth:[49.478333333333,10.990277777778],gelsenkirchen:[51.511111111111,7.1005555555556],gera:[50.8758368,12.086176],greiz:[50.6535563,12.1884156],hagen:[51.359444444444,7.475],halle:[51.482777777778,11.97],hamburg:[53.5464148,9.984099],hamm:[51.681069444444,7.8171166666667],hannover:[52.374444444444,9.7386111111111],heidelberg:[49.412222222222,8.71],heilbronn:[49.141666666667,9.2222222222222],herne:[51.541944444444,7.2238888888889],ingolstadt:[48.765555555556,11.424444444444],jena:[50.9237905,11.5806506],karlsruhe:[49.014,8.4043],kassel:[51.316666666667,9.5],kiel:[54.325277777778,10.140555555556],koeln:[50.938055555556,6.9569444444444],konstanz:[47.66,9.16],krefeld:[51.336944444444,6.5641666666667],leipzig:[51.340333333333,12.37475],leverkusen:[51.033333333333,6.9833333333333],ludwigshafen:[49.483055555556,8.4477777777778],luebeck:[53.866111111111,10.683888888889],magdeburg:[52.133333333333,11.616666666667],mainz:[50,8.2711111111111],mannheim:[49.483611111111,8.4630555555556],moenchengladbach:[51.191111111111,6.4419444444444],"muelheim-an-der-ruhr":[51.433055555556,6.8830555555556],muenchen:[48.14,11.56],muenster:[51.9502139,7.591131],neuss:[51.198611111111,6.6913888888889],nuernberg:[49.455555555556,11.078611111111],oberhausen:[51.470277777778,6.8522222222222],oldenburg:[53.143888888,8.213888888],osnabrueck:[52.278888888889,8.0430555555556],paderborn:[51.7231179,8.7548663],potsdam:[52.395833333333,13.061388888889],regensburg:[49.016666666,12.083333333],reutlingen:[48.4912203,9.208576],rostock:[54.083333333333,12.133333333333],saarbruecken:[49.233333333333,7],solingen:[51.171388888889,7.0833333333333],tuebingen:[48.5197257,8.998209],ulm:[48.3843119,10],wiesbaden:[50.082083333333,8.2413611111111],wismar:[53.888213888889,11.462016666667],wolfsburg:[52.423055555556,10.787222222222],wuerzburg:[49.794444444444,9.9294444444444],wuppertal:[51.259166666667,7.2111111111111],schweiz:[46.8,8.2333333333333],basel:[47.55814,7.58769],zuerich:[47.37174,8.54226],poland:[52.146944444444,19.378055555556],wroclaw:[51.11,17.032222222222],hungary:[47,20],szeged:[46.255,20.145],taiwan:[23.62985,121.05317]},m={deutschland:6,schweiz:8,poland:6,hungary:7,taiwan:8},_=location.hostname,g=_.split("."),v=g[0].toLowerCase();"undefined"!=typeof p[v]&&null!==p[v]&&(d["default"].center=p[v]),"undefined"!=typeof m[v]&&null!==m[v]&&(d["default"].zoom=m[v]),console.log("Center: "+d["default"].center),console.log("Zoom: "+d["default"].zoom)}new a["default"](u["default"]).$mount("#v-app")}],[33]);